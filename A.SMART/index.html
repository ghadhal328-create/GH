<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Studio</title>
<style>
  :root{
    --bg:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
    --card:#111827; --brand:#7c3aed; --brand2:#22d3ee;
    --chip-bg:#0a0f1b; --chip-border:rgba(255,255,255,.2);
  }
  body.light{
    --bg:#f9fafb; --text:#111; --muted:#555;
    --card:#fff; --chip-bg:#f1f5f9; --chip-border:#cbd5e1;
  }
  body{
    margin:0; font-family:'Cairo',sans-serif; background:var(--bg); color:var(--text);
  }
  header{text-align:center;padding:20px}
  h1{margin:0;font-size:28px}
  .container{max-width:1100px;margin:auto;padding:20px}
  textarea,select{
    width:100%;border-radius:12px;border:1px solid #ccc;padding:12px;margin-bottom:10px;
    font-family:inherit;font-size:14px;background:var(--card);color:var(--text);
  }
  button{
    padding:10px 16px;border:none;border-radius:10px;
    background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;
    cursor:pointer;font-weight:bold;transition:.2s;
  }
  button:hover{opacity:.9}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}
  .card{background:var(--card);padding:16px;border-radius:12px}
  .out{min-height:80px;white-space:pre-wrap;line-height:1.6;margin-top:8px;padding:10px;border:1px solid #ccc;border-radius:8px}
  .row{display:flex;justify-content:space-between;align-items:center}
  .copy{font-size:12px;background:var(--chip-bg);border:1px solid var(--chip-border);padding:4px 8px;border-radius:6px;cursor:pointer}
  .chips{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
  .chip{padding:6px 10px;border-radius:999px;background:var(--chip-bg);border:1px solid var(--chip-border);font-size:13px}
  footer{text-align:center;color:var(--muted);font-size:12px;margin-top:20px}
  .toast{position:fixed;bottom:20px;right:20px;background:#333;color:#fff;padding:8px 14px;border-radius:6px;opacity:0;transition:.3s}
  .toast.show{opacity:1}
  #toggleMode{position:fixed;top:10px;left:10px;font-size:18px;padding:6px 10px}
</style>
</head>
<body>
<button id="toggleMode">ğŸŒ™</button>
<header><h1>AI Studio</h1></header>
<div class="container">
  <textarea id="input" placeholder="Ø§ÙƒØªØ¨ Ø£Ùˆ Ø£Ù„ØµÙ‚ Ù†ØµÙ‹Ø§ Ø¹Ø±Ø¨ÙŠÙ‹Ø§ Ù‡Ù†Ø§..."></textarea>
  <button id="runBtn">ğŸš€ Ø¥Ù†Ø´Ø§Ø¡</button>
  <button id="demoBtn">Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
  <div style="margin:15px 0">
    <label>Ø§Ø®ØªØ± Ù„ØºØ© Ø§Ù„ØªØ±Ø¬Ù…Ø©:</label>
    <select id="lang">
      <option value="en">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
      <option value="fr">Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</option>
      <option value="es">Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©</option>
    </select>
  </div>
  <div class="grid">
    <div class="card">
      <div class="row"><h3>ğŸ“Œ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h3><span class="copy" data-copy="title">Ù†Ø³Ø®</span></div>
      <div id="title" class="out"></div>
    </div>
    <div class="card">
      <div class="row"><h3>âœ Ø§Ù„Ù…Ù„Ø®Øµ</h3><span class="copy" data-copy="summary">Ù†Ø³Ø®</span></div>
      <div id="summary" class="out"></div>
    </div>
    <div class="card">
      <div class="row"><h3>ğŸ”‘ Ø§Ù„Ù†Ù‚Ø§Ø·</h3><span class="copy" data-copy="bullets">Ù†Ø³Ø®</span></div>
      <div id="bullets" class="out"></div>
    </div>
    <div class="card">
      <div class="row"><h3>#ï¸âƒ£ Ù‡Ø§Ø´ØªØ§Ù‚Ø§Øª</h3><span class="copy" data-copy="tags">Ù†Ø³Ø®</span></div>
      <div id="tags" class="chips"></div>
    </div>
    <div class="card">
      <div class="row"><h3>ğŸŒ Ø§Ù„ØªØ±Ø¬Ù…Ø©</h3><span class="copy" data-copy="translation">Ù†Ø³Ø®</span></div>
      <div id="translation" class="out"></div>
    </div>
  </div>
</div>
<footer>Â© 2025 â€” Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ø¬Ø¨ Ø¬Ø§Ù…Ø¹ÙŠ</footer>
<div id="toast" class="toast"></div>
<script>
  // âš  Ø¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¦Ù‡ Ù…Ù† Ù…ÙˆÙ‚Ø¹ Hugging Face
  const API_KEY="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";

  const SUM_MODEL="csebuetnlp/mT5_multilingual_XLSum";
  const TRANS_MODEL="facebook/mbart-large-50-many-to-many-mmt";

  const $=id=>document.getElementById(id);
  function showToast(msg){
    const t=$("toast"); t.textContent=msg;t.classList.add("show");
    setTimeout(()=>t.classList.remove("show"),1500);
  }
  function copy(id){
    const el=$(id);
    let txt=id==="tags"?Array.from(el.querySelectorAll(".chip")).map(c=>c.textContent).join(" "):el.textContent;
    if(txt) {navigator.clipboard.writeText(txt); showToast("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ”");}
  }
  document.querySelectorAll(".copy").forEach(b=>b.onclick=()=>copy(b.dataset.copy));
  $("toggleMode").onclick=()=>{document.body.classList.toggle("light");$("toggleMode").textContent=document.body.classList.contains("light")?"â˜€":"ğŸŒ™";};

  async function callHF(model,input,extra){
    const res=await fetch(`https://api-inference.huggingface.co/models/${model}`,{
      method:"POST",
      headers:{
        "Authorization":"Bearer " + API_KEY,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({inputs:input,...extra})
    });
    return res.json();
  }

  function clean(t){return(t||"").replace(/\s+/g," ").trim();}
  function makeTitle(summary){return clean(summary.split(" ").slice(0,10).join(" "));}
  function toBullets(summary){return summary.split(/ØŒ|\.|\n/).filter(x=>x.trim()).map(x=>"â€¢ "+x.trim());}
  function makeHashtags(text){const words=text.split(/\s+/).filter(w=>w.length>4);return [...new Set(words)].slice(0,6).map(w=>"#"+w);}

  $("runBtn").onclick=async()=>{
    const text=$("input").value.trim(); if(!text) return;
    $("summary").textContent="â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";
    try{
      // Ø§Ù„ØªÙ„Ø®ÙŠØµ
      const sumData=await callHF(SUM_MODEL,text);
      const summary=sumData[0]?.summary_text||"Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ„Ø®ÙŠØµ";
      $("summary").textContent=summary;
      $("title").textContent=makeTitle(summary);
      $("bullets").textContent=toBullets(summary).join("\n");
      $("tags").innerHTML="";
      makeHashtags(summary).forEach(t=>{
        const d=document.createElement("div");
        d.className="chip";d.textContent=t;$("tags").appendChild(d);
      });

      // Ø§Ù„ØªØ±Ø¬Ù…Ø©
      const lang=$("lang").value;
      const langMap={en:"en_XX",fr:"fr_XX",es:"es_XX"};
      const trans=await callHF(TRANS_MODEL,text,{parameters:{src_lang:"ar_AR",tgt_lang:langMap[lang]}});
      $("translation").textContent=trans[0]?.translation_text||"â€”";
    }catch(e){
      $("summary").textContent="âŒ Ø®Ø·Ø£: "+e.message;
    }
  };

  $("demoBtn").onclick=()=>{
    $("input").value="Ø´Ù‡Ø¯Øª Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙÙŠ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© Ù†Ù‡Ø¶Ø© ØªÙ†Ù…ÙˆÙŠØ© Ø´Ø§Ù…Ù„Ø© Ø¶Ù…Ù† Ø±Ø¤ÙŠØ© 2030ØŒ Ø¥Ø° Ø±ÙƒØ²Øª Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø¹Ù„Ù‰ ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ØºÙŠØ± Ø§Ù„Ù†ÙØ·ÙŠØ©.";
  };
</script>
</body>
</html>
